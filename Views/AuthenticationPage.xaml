<ContentPage
    x:Class="SnapLabel.Views.AuthenticationPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:buttons="clr-namespace:Syncfusion.Maui.Buttons;assembly=Syncfusion.Maui.Buttons"
    xmlns:constant="clr-namespace:SnapLabel.Constants"
    xmlns:sfPopup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
    xmlns:sync="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
    xmlns:vm="clr-namespace:SnapLabel.ViewModels"
    x:Name="authPage"
    x:DataType="vm:AuthenticationPageViewModel"
    NavigationPage.HasNavigationBar="False">


    <Grid RowDefinitions="150,*">

        <Image
            Margin="0,40,0,20"
            Aspect="AspectFit"
            HorizontalOptions="Center"
            MaximumHeightRequest="150"
            Source="cloud.png"
            VerticalOptions="Center" />


        <VerticalStackLayout
            Grid.Row="1"
            Padding="30"
            Spacing="20">

            <!--  Email Entry  -->
            <Entry
                Keyboard="Email"
                Placeholder="Email"
                Text="{x:Binding UserVM.Email}" />

            <!--  Password Entry  -->
            <Entry
                Margin="0,10"
                IsPassword="True"
                Placeholder="Password"
                Text="{x:Binding UserVM.Password}" />

            <!--  Create Account Label  -->
            <Label
                FontAttributes="Bold"
                FontSize="14"
                HorizontalOptions="Center"
                HorizontalTextAlignment="Center"
                Text="Don't have an account? Create one"
                TextColor="#2882D1">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Command="{x:Binding OpenCreateAccountPopUpCommand}" />
                </Label.GestureRecognizers>
            </Label>

            <!--  Login Button  -->
            <Button
                Margin="0,20,0,0"
                Command="{Binding LoginCommand}"
                Style="{StaticResource LoginButtonStyle}"
                Text="Login" />

            <sfPopup:SfPopup
                Margin="{OnIdiom Phone=20,
                                 Desktop=0}"
                Padding="20"
                AnimationMode="Zoom"
                AutoSizeMode="Both"
                IsFullScreen="False"
                IsOpen="{x:Binding IsCreatingAccountPopUpOpen,
                                   x:DataType=vm:AuthenticationPageViewModel}"
                ShowHeader="False"
                StaysOpen="True">

                <sfPopup:SfPopup.PopupStyle>
                    <sfPopup:PopupStyle CornerRadius="16" PopupBackground="{AppThemeBinding Dark='#232323', Light={StaticResource White}}" />
                </sfPopup:SfPopup.PopupStyle>

                <sfPopup:SfPopup.ContentTemplate>
                    <DataTemplate x:DataType="vm:AuthenticationPageViewModel">
                        <VerticalStackLayout Padding="16" Spacing="12">

                            <Label
                                FontAttributes="Bold"
                                FontSize="18"
                                HorizontalOptions="Center"
                                Text="Create Account"
                                TextColor="#2882D1" />

                            <Entry Placeholder="Full Name" Text="{Binding UserVM.Name}" />
                            <Entry Placeholder="Email" Text="{Binding UserVM.Email}" />
                            <Entry Placeholder="Password" Text="{Binding UserVM.Password}" />


                            <HorizontalStackLayout Spacing="10">
                                <buttons:SfButton
                                    Command="{x:Binding CreateAccountCommand,
                                                        x:DataType=vm:AuthenticationPageViewModel}"
                                    Style="{StaticResource RippleButtonStyle}"
                                    Text="Create Account"
                                    WidthRequest="150" />
                                <buttons:SfButton
                                    Command="{x:Binding CancelCommand,
                                                        x:DataType=vm:AuthenticationPageViewModel}"
                                    Style="{StaticResource RippleButtonStyle}"
                                    Text="Cancel"
                                    WidthRequest="150" />
                            </HorizontalStackLayout>

                        </VerticalStackLayout>
                    </DataTemplate>
                </sfPopup:SfPopup.ContentTemplate>
            </sfPopup:SfPopup>
        </VerticalStackLayout>
    </Grid>
</ContentPage>
