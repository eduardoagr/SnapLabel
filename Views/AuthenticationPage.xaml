<ContentPage
    x:Class="SnapLabel.Views.AuthenticationPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:android="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.AndroidSpecific;assembly=Microsoft.Maui.Controls"
    xmlns:buttons="clr-namespace:Syncfusion.Maui.Buttons;assembly=Syncfusion.Maui.Buttons"
    xmlns:models="clr-namespace:SnapLabel.Models"
    xmlns:sfPopup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
    xmlns:sync="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
    xmlns:vm="clr-namespace:SnapLabel.ViewModels"
    android:Application.WindowSoftInputModeAdjust="Resize"
    x:DataType="vm:AuthenticationPageViewModel"
    NavigationPage.HasNavigationBar="False">

    <ScrollView>
        <Grid RowDefinitions="150,*">

            <Image
                Margin="0,40,0,20"
                Aspect="AspectFit"
                HorizontalOptions="Center"
                MaximumHeightRequest="150"
                Source="cloud.png"
                VerticalOptions="Center" />


            <VerticalStackLayout
                Grid.Row="1"
                Padding="30"
                Spacing="20">

                <!--  Email Entry  -->
                <sync:SfTextInputLayout Hint="Email">
                    <Entry Keyboard="Email" Text="{x:Binding User.Email}" />
                </sync:SfTextInputLayout>

                <!--  Password Entry  -->
                <sync:SfTextInputLayout EnablePasswordVisibilityToggle="True" Hint="Password">
                    <Entry
                        Margin="0,10"
                        IsPassword="True"
                        Text="{x:Binding User.Password}" />
                </sync:SfTextInputLayout>

                <!--  Create Account Label  -->
                <Label
                    FontAttributes="Bold"
                    FontSize="14"
                    HorizontalOptions="Center"
                    HorizontalTextAlignment="Center"
                    Text="Don't have an account? Create one"
                    TextColor="#2882D1">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{x:Binding OpenCreateAccountPopUpCommand}" />
                    </Label.GestureRecognizers>
                </Label>

                <!--  Login Button  -->
                <Button
                    Margin="0,20,0,0"
                    Command="{Binding LoginCommand}"
                    Text="Login"
                    WidthRequest="250" />

                <sfPopup:SfPopup
                    x:Name="createAccountPopUp"
                    Margin="{OnIdiom Phone=20,
                                     Desktop=0}"
                    Padding="20"
                    AnimationMode="Zoom"
                    IsOpen="{x:Binding _isCreatingAccountPopUpOpen}"
                    ShowHeader="False"
                    StaysOpen="True">

                    <sfPopup:SfPopup.PopupStyle>
                        <sfPopup:PopupStyle CornerRadius="16" PopupBackground="{AppThemeBinding Dark='#232323', Light={StaticResource White}}" />
                    </sfPopup:SfPopup.PopupStyle>

                    <sfPopup:SfPopup.ContentTemplate>
                        <DataTemplate x:DataType="vm:AuthenticationPageViewModel">
                            <ScrollView>
                                <VerticalStackLayout Padding="16" Spacing="12">

                                    <Label
                                        FontAttributes="Bold"
                                        FontSize="18"
                                        HorizontalOptions="Center"
                                        Text="Create Account"
                                        TextColor="#2882D1" />

                                    <sync:SfTextInputLayout Hint="Username">
                                        <Entry Keyboard="Text" Text="{Binding User.Username}" />
                                    </sync:SfTextInputLayout>

                                    <sync:SfTextInputLayout Hint="Email">
                                        <Entry Keyboard="Email" Text="{Binding User.Email}" />
                                    </sync:SfTextInputLayout>

                                    <sync:SfTextInputLayout Hint="Phone Number">
                                        <Entry Keyboard="Telephone" Text="{Binding User.PhoneNumber}" />
                                    </sync:SfTextInputLayout>

                                    <sync:SfTextInputLayout EnablePasswordVisibilityToggle="True" Hint="Password">
                                        <Entry Text="{Binding User.Password}" />
                                    </sync:SfTextInputLayout>


                                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                                        <Button Command="{x:Binding CreateAccountCommand, x:DataType=vm:AuthenticationPageViewModel}" Text="Create Account" />
                                        <Button
                                            Grid.Column="1"
                                            Command="{x:Binding CancelCommand,
                                                                x:DataType=vm:AuthenticationPageViewModel}"
                                            Text="Cancel" />
                                    </Grid>

                                </VerticalStackLayout>
                            </ScrollView>
                        </DataTemplate>
                    </sfPopup:SfPopup.ContentTemplate>
                </sfPopup:SfPopup>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>